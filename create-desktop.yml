---
- name: Configure instance
  hosts: all
  become: yes
  vars_files:
  - credentials.yml

  roles:
  - role: ansible-role-lxde-install
  - role: ansible-role-vnc-install
  - role: ansible-role-nginx-install
  - role: ansible-role-nginx-ssl-selfsigned
  - { role: ansible-role-novnc-install, notify: "Start Supervisor" }

  tasks:
  - name: Add apt-get repository
    apt_repository:
      repo: 'ppa:openjdk-r/ppa'

  - name: Install Java
    apt:
      name: openjdk-8-jdk
      state: present

  - name: Prepare download folder
    become: no
    file:
      path: ~/Download
      state: directory

  - name: Download
    become: no
    get_url:
      dest: ~/Download/download.jar
      url: https://osbot.org/mvc/get

